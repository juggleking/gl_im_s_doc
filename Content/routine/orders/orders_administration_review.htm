<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Routine|Orders|Orders" data-mc-priority="0" data-mc-time-estimate="0" data-mc-id="Orders_-_Index">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Order administration review</title>
        <link href="../../Resources/StyleSheets/shared.css" rel="stylesheet" type="text/css" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" defer="defer" type="text/javascript">
        </script>
    </head>
    <body>
        <h1>Order administration review</h1>
        <p>Content: <a href="#Introduc">Introduction</a> - <a href="#Configur">Configuration</a> - <a href="#Routine">Routine</a> - <a href="#Use">Use case</a></p>
        <h2><a name="Introduc" xmlns=""></a>Introduction</h2>
        <p>The <span class="ui_element">Order administration review</span> functionality allows you to:</p>
        <ul>
            <li value="1">Put orders  on review lists,</li>
            <li value="2">Prevent these orders  from being further processed (scheduled, billed,...) until they are reviewed,</li>
            <li value="3">Query on orders that need to be reviewed.</li>
        </ul>
        <p>Here is an example of a screen from which an order can be reviewed:</p>
        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="orders_administration_review_item_review_screen.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="1307" data-mc-height="998" src="orders_administration_review_item_review_screen_thumb_0_120.png" tabindex="" /></a>
        </p>
        <p>The following sections present the required configuration  and explain how to use this functionality in routine.</p>
        <h2><a name="Configur" xmlns=""></a>Configuration</h2>
        <p xmlns="">The necessary configuration consists in the creation of  lists on which orders to be reviewed can be placed. Such lists are called <span class="ui_element">Order to-do lists</span>.</p>
        <p><a name="Creation"></a>To create an order to-do list, press Insert in the Order to-do list browser (<span class="ui_element">Start</span> -&gt; <span class="ui_element">Configuration</span> -&gt; <span class="ui_element">Order to-do lists</span>).</p>
        <p>In the field <span class="ui_element">Trigger when reviewed</span>, enter an Order-based MISPL function of data type Logical that should be run when an order (i.e. an order to-do item) placed on this list is <a href="#Review">reviewed</a>. </p>
        <p>In the field <span class="ui_element">Header text for review screen</span> , insert a <a href="../../configuration/mispl_texts/texts_syntax_grammar.htm">text-module</a> (plain text, HTML, MISPL) to be displayed in the <a href="#Review">item review screen</a>.</p>
        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a style="font-weight: bold; color: #003366" href="javascript:void(0)" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Example</a></span>
            <div class="MCDropDownBody dropDownBody">
                <div class="text_box_examples">
                    <p><span style="color: #003366; font-weight: bold;">Example</span>
                    </p>
                    <p>Here is an example of an HTML text-module that can be inserted in the field <span class="ui_element">Header text for review screen</span>field: <a href="orders_administration_review_text_module.txt">order_administration_review_text_module</a>.</p>
                </div>
            </div>
        </div>
        <h2><a name="Routine" xmlns=""></a>Routine</h2>
        <h3><a name="Creating"></a>Creating order to-do items</h3>
        <p>Order to-do items are orders placed on an order to-do list and because they need to be reviewed.</p>
        <p>Creating order to-do items can be done manually or via MISPL. When an order  is added to an order to-do list, it is marked as <span class="ui_element">To be reviewed</span> in the <span class="ui_element">Order to-do items</span> browser (<span class="ui_element">Start</span> -&gt; <span class="ui_element">Routine</span> -&gt; <span class="ui_element">Orders</span> -&gt; <span class="ui_element">Order to-do items</span>).</p>
        <h4><a name="Manual"></a>Manual creation</h4>
        <p>To create an order to-do item, use the contextual ribbon/menu item <span class="ui_element">Add an order to-do item</span> on the order(s) of your choice, either from the <span class="ui_element">Order entry</span> screen or from an Order browser.</p>
        <p>In the window that opens, select an order to-do list to which the order to-do item should be added. Fill in the <span class="ui_element">Reason</span> (free text) for the creation of this item.</p>
        <h4><a name="Using"></a>Creation using MISPL</h4>
        <p>The Order-based MISPL function AddOrderTodoItem allows you to create new order to-do items and adding them to a configured order to-do list. The parameters of this function are the mnemonic of the order to-do list to which the order to-do items should be added and the reason for the creation of the items.</p>
        <div class="text_box_notes">
            <p><span style="color: #616E14; font-weight: bold;">Notes</span>
            </p>
            <ul>
                <li value="1">The creation is not possible if, for the same order, an open order to-do item with the same <span class="ui_element">Reason</span> is already linked to the same to-do list.</li>
                <li value="2">The contextual ribbon/menu item <span class="ui_element">Add an order to-do item</span> has a MISPL function counterpart: AddOrderTodoItems. This function uses the id of the order to-do list instead of its mnemonic. It is however not active and should therefore not be used.</li>
            </ul>
        </div>
        <h3><a name="Processi"></a>Processing order to-do items</h3>
        <p xmlns="">There are two ways to process order to-do items: in the review screen or by simply closing them. In both cases, the MISPL function indicated in the <a href="#Creation">Review trigger</a> field of the to-do list to which these items are linked is launched. If this function returns TRUE, the items are automatically closed.</p>
        <h4><a name="Review"></a>Review order to-do items</h4>
        <p>To review an order to-do item:</p>
        <ol>
            <li value="1">Select it in the <span class="ui_element">Order to-do items</span> <a href="#Order">browser</a> and use the contextual ribbon/menu item <span class="ui_element">Review to-do item</span>.</li>
            <li value="2">A screen opens and displays the <a href="#Creation">text-module</a> indicated in the editor of the order to-do list to which the item was added. </li>
            <li value="3">
                <p>Click <span class="ui_element">Review item</span> on the bottom right of the screen.</p>
            </li>
        </ol>
        <h4>Close and reopen order to-do items</h4>
        <p>To close one or more order to do-items, select them in the <span class="ui_element">Order to-do items</span> browser and use the contextual ribbon/menu item <span class="ui_element">Close order to-do item</span>. To reopen them, use <span class="ui_element">Reopen order to-do item</span>.</p>
        <h3><a name="Consulta"></a>Consulting order to-do items</h3>
        <h4>From a specific order</h4>
        <h5 style="font-size: 8pt;">Manually</h5>
        <p>In order to get a list of the order to-do items of a specific order, right-click on this order -&gt; <span class="ui_element">Show all</span> -&gt; <span class="ui_element">Reviews</span>.</p>
        <h5 style="font-size: 8pt;">Using MISPL</h5>
        <p>The Order-based MISPL function GetOrderTodoItems allows you to retrieve the IDs of the order to-do items belonging to a specific order. The parameters of this function are:</p>
        <ul>
            <li value="1"> The mnemonic of the order to-do list to which the items were added.</li>
            <li value="2"> The value of the <span class="ui_element">To be reviewed</span> field, which indicates whether the items searched for are <a href="#Review">to be reviewed</a> or not.</li>
        </ul>
        <p>The ID returned by GetOrderTodoItems can then be used as the single parameter of the Order-based MISPL function GetOrderTodoItem, which returns the entire record of the order to-do item.</p>
        <h4><a name="Order"></a>Order to do-item query and browser</h4>
        <p>In order to consult the list of created order to-do items, go to <span class="ui_element">Start</span> -&gt; <span class="ui_element">Routine</span> -&gt; <span class="ui_element">Orders</span> -&gt; <span class="ui_element">Order to-do items</span>.</p>
        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="orders_administration_review_items_query_browser.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="783" data-mc-height="378" src="orders_administration_review_items_query_browser_thumb_0_120.png" tabindex="" /></a>
        </p>
        <p>The query screen that opens allows you to search for items:</p>
        <ul>
            <li value="1">Of a specific order,</li>
            <li value="2">Of a specific to-do list,</li>
            <li value="3">That are either <a href="#Review">to be reviewed or not</a>.</li>
        </ul>
        <p> The <span class="ui_element">Filter</span> field allows for the insertion of a MISPL function in order to look up items on the basis of other criteria.</p>
        <p xmlns="">For each item, the browser  shows: </p>
        <ul>
            <li xmlns="" value="1">The related order</li>
            <li xmlns="" value="2">Whether the item is to be reviewed or not,</li>
            <li xmlns="" value="3">The related order to-do list, </li>
            <li xmlns="" value="4">When the item has been reviewed</li>
            <li xmlns="" value="5">By whom the item has been reviewed,</li>
            <li xmlns="" value="6">The <a href="#Manual">reason</a> for which the item has been created.</li>
        </ul>
        <h2><a name="Use"></a>Use case</h2>
        <h3>Introduction</h3>
        <p>The Order administration review program can for instance be used to prevent the scheduling of expensive tests before the order they belong to is reviewed. Here is a possible workflow:</p>
        <ol>
            <li value="1">An order containing a non-expensive test A and an expensive test B is entered and saved.</li>
            <li value="2">Test A is scheduled, test B remains in status <span class="ui_element">Initial</span>. The order is placed on an order to-do list created for orders containing expensive tests.</li>
            <li value="3">A user reviews the order.</li>
            <li value="4">Test B is scheduled.</li>
        </ol>
        <p>The following section describes the required configuration to implement such a case.</p>
        <h3>Configuration</h3>
        <ol>
            <li value="1">
                <p><a href="#Configur">Create an Order to-do list</a> on which orders containing expensive tests should be placed. In the field <span class="ui_element">Trigger when reviewed</span>, insert a MISPL function dictating that expensive tests should be scheduled when orders placed on the to-do list are reviewed:</p>
                <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="orders_administration_review_MISPL_reschedule.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="893" data-mc-height="485" src="orders_administration_review_MISPL_reschedule_thumb_0_120.png" tabindex="" /></a>
                </p>
            </li>
            <li value="2">
                <p>In the procedures of all expensive tests, add a MISPL function to prevent these tests from being scheduled if the order they belong to is placed on the order to-do list:</p>
                <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="orders_administration_review_MISPL_procedure.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="966" data-mc-height="773" src="orders_administration_review_MISPL_procedure_thumb_0_120.png" tabindex="" /></a>
                </p>
                <div class="indented">
                    <p class="fieldlabel">MISPL</p><pre xml:space="preserve">LOGICAL lSelect, lToDo;
STRING sToDoList;
					
lSelect := TRUE;
					
sToDoList := .Order.GetOrderTodoItems("Expensive_OrderReview", ?);
lToDo := .Order.GetOrderTodoItem(StringToInteger(sToDoList)).ToDo;
              
IF lToDo THEN
               
  lSelect := FALSE;
               
ENDIF;
               
RETURN lSelect;</pre>
                </div>
            </li>
            <li value="3">In the MISPL program inserted in the <a href="order_entry/options/order_entry_options_tab_main.htm#After">After creation or update</a> field (<span class="ui_element">Order entry</span> screen -&gt; <span class="ui_element">Options</span> button -&gt; <span class="ui_element">Main</span> tab), add a function dictating that when an order is saved, 
				<ol><li value="1">GLIMS should check if the order contains expensive tests, and if it does,</li><li value="2"> this order should be placed on the order to-do list, and</li><li value="3">a message should invite the user to review the order.</li></ol><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="orders_administration_review_MISPL_commit.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="1228" data-mc-height="686" src="orders_administration_review_MISPL_commit_thumb_0_120.png" tabindex="" /></a></p><div class="indented"><p class="fieldlabel">MISPL</p><pre>
/*Order on To-do list - Expensive tests */
					
IF .PropertyList (?, ?, ?, "EXPENSIVE_ORDERREVIEW", ?) &lt;&gt; " " THEN
  Message("Order with expensive test(s), check the Order to-do list and review the order");
  .AddOrderTodoItem ("EXPENSIVE_ORDERREVIEW", "Order with expensive test(s)");
ENDIF;
</pre><p class="fieldlabel">Order entry</p><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="orders_administration_review_commit_message.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="686" data-mc-height="360" src="orders_administration_review_commit_message_thumb_0_120.png" tabindex="" /></a></p></div></li>
        </ol>
    </body>
</html>