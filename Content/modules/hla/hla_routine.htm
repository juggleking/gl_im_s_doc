<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Modules|HLA" data-mc-priority="0" data-mc-time-estimate="0" data-mc-id="v55\english\tutorials\hla\routine.htm">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <meta name="ProgId" content="FrontPage.Editor.Document" /><title>HLA routine</title>
        <link href="../../Resources/StyleSheets/shared.css" rel="stylesheet" type="text/css" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" defer="defer" type="text/javascript">
        </script>
    </head>
    <body>
        <h1><a name="aanchor2182"></a>
            <MadCap:concept term="HLA" />HLA -
 Routine</h1>
        <ul>
            <li value="1"><a href="#Indicating%20the%20antigen/antibody%20presence%20for%20a%20person" name="kanchor192">Indicating 
	 the antigen/antibody presence for a person</a>
            </li>
            <li value="2"><a href="#Consultation%20of%20antigen/antibody%20presence%20for%20a%20person">Consultation 
	 of antigen/antibody presence for a person</a>
            </li>
            <li value="3"><a href="#Person%20Medical%20Record">Person Medical 
	 Record</a>
            </li>
            <li value="4"><a href="#Using%20the%20object%20data%20sheet">Using the 
	 object data sheet</a>
            </li>
        </ul>
        <h2><a name="Indicating the antigen/antibody presence for a person"></a>Indicating 
 the antigen/antibody presence for a person</h2>
        <h3>Manually</h3>
        <p>On each Person record, you can use the contextual menu function 'HLA -&gt; 
 HLA antigens -&gt; HLA-antigens' to open the person HLA antigen browser.</p>
        <ul>
            <li value="1">
                <p><b style="font-weight: bold;">Antigen</b>: 
	 double-click or hit CTRL-F to select an antigen</p>
            </li>
            <li value="2">
                <p><b style="font-weight: bold;">Presence</b>: 
	 indicates if the antigen is present in the person (Yes/No)</p>
            </li>
        </ul>
        <p>On each Person record, you can use the contextual menu function 'HLA -&gt; HLA antibodies -&gt; HLA antibodies' to open 
 the person HLA antibody browser.</p>
        <ul>
            <li value="1">
                <p><b style="font-weight: bold;">Antibody</b>: 
	 double-click or hit CTRL-F to select an antibody</p>
            </li>
            <li value="2">
                <p><b style="font-weight: bold;">Present</b>: 
	 indicates if the antibody is present in the person (Yes/No)</p>
            </li>
            <li value="3">
                <p><b style="font-weight: bold;">R 
	 value</b>: In addition to determining how much or how little PRA a 
	 patient has, we need to know how specific the antibody is. That is, 
	 is the antibody specific to a particular HLA. For example, if you 
	 received a transfusion from a donor with HLA-A2, you may develop antibody 
	 to A2. That's antibody specificity. Some patients have one or two 
	 antibody specificities, while others have numerous specificities.</p>
            </li>
            <li value="4">
                <p><b style="font-weight: bold;">Date</b>: 
	 the meaning of this date can vary according to lab-internal rules</p>
            </li>
        </ul>
        <h3>By means of MISPL</h3>
        <p>A number of MISPL functions are available to set the antigen / antibody 
 presence for a person:</p>
        <ul>
            <li value="1">Person.SetHLAAntigenPresence</li>
            <li value="2">Person.SetHLAAntibodyPresence</li>
            <li value="3">Person.SetHLAAntibodyRValue</li>
        </ul>
        <p>Remark:</p>
        <p class="MsoNormal" style="margin-left: 40px;">The following problem could 
 occur: if the HLA antigen does not yet exist in the configuration table, 
 the function "<span class="Apple-style-span" style="font-size: 11px;line-height: normal;orphans: 2;widows: 2;-webkit-text-decorations-in-effect: none;-webkit-text-size-adjust: auto;-webkit-text-stroke-width: 0px;">Person.SetHLAAntigenPresence</span>" 
 produces an error and aborts the entire site function. To solve 
 this, use the MISPL function "HLAAntigenExists" which expects 
 1<span>&#160;</span>parameter (of type string), 
 being the name of the HLA antigen to be checked.</p>
        <ol style="list-style-type: decimal;">
            <ol style="list-style-type: decimal;">
                <li value="1">
                    <p class="MsoNormal">If the HLA antigen exists, it returns 
		 YES, else it returns NO.</p>
                </li>
                <li value="2">
                    <p class="MsoNormal">If no antigen name is specified (the unknown 
		 value is specified as name), the function will raise an error 
		 and the MISPL execution will be aborted.</p>
                </li>
            </ol>
        </ol>
        <h2><a name="Consultation of antigen/antibody presence for a person"></a>Consultation 
 of antigen/antibody presence for a person</h2>
        <p>A number of MISPL functions are available (executable via <a href="../../user_interface/user_interface_ribbons_contextual_tools.htm#Run">Run MISPL</a>) which allow checking the antigen/antibody 
 presence for a person:</p>
        <h4>Testing the presence of 1 antigen/antibody</h4>
        <ul>
            <li value="1">Person.HLAAntigen</li>
            <li value="2">Person.HLAAntibody</li>
        </ul>
        <h4>Browsing all antigens/antibodies</h4>
        <ul>
            <li value="1">Person.HLAAntigenByNumber</li>
            <li value="2">Person.HLAAntibodyByNumber</li>
        </ul>
        <h2><a name="Person Medical Record"></a><a name="kanchor194"></a>Person Medical Record</h2>
        <p>From each Person record you can open a HLA-specific Person Medical Record 
 (contextual menu function HLA -&gt; Person medical record).</p>
        <h3>Typing</h3>
        <ul>
            <li value="1">
                <p><b style="font-weight: bold;">Type 
	 (serol.)</b> and <b>Type (DNA)</b> can be set/retrieved by means of 
	 MISPL</p>
                <ul>
                    <li value="1">
                        <p>Person.SetMedicalRecord</p>
                    </li>
                    <li value="2">
                        <p>Person.GetMedicalRecord<br />		&#160;</p>
                    </li>
                </ul>
            </li>
            <li value="2">
                <p>The following fields are 
	 not yet supported in MISPL:<br /><br />	HLA-type locus A<br />	HLA-type locus B<br />	HLA-type locus C<br />	HLA-type locus DR<br />	HLA-type locus DQ</p>
            </li>
        </ul>
        <h3>Screening</h3>
        <ul>
            <li value="1">
                <p>The <b>Antigens</b> and 
	 <b>Antibodies</b> windows display the records of the Person HLA antigen 
	 and Person HLA antibody table</p>
            </li>
        </ul>
        <h2><a name="Using the object data sheet"></a>Using the object data sheet</h2>
        <p>By means of the contextual menu function <a href="../../configuration/objects/objects_data_sheet.htm">Object.Datasheet</a>, 
 you can generate an overview sheet for a given patient with HLA-specific 
 information.</p>
        <h4>Example</h4>
        <p>The example below uses the following text module as function parameter:</p>
        <table style="border-collapse: separate;border-collapse: separate;margin-left: 0;margin-right: auto;" cellspacing="0" width="100%" border="1">
            <tr>
                <td style="width: 100%;padding-left: 3px;padding-top: 3px;padding-right: 3px;padding-bottom: 3px;"><pre>
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;TITLE&gt; H L A &#160;&#160;&#160;D A T A &#160;S H E E T
&lt;/TITLE&gt;
&lt;LINK REL="stylesheet" HREF="Data-Sheet.css" TYPE="text/css"&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;H1&gt; HLA data sheet for patient &lt;u&gt;{=.Person().LastName} {=.Person().FirstName}&lt;/u&gt; &lt;/H1&gt;
&lt;H2&gt; General&lt;/H2&gt;
&lt;UL TYPE="Square"&gt;
&lt;LI&gt;
&lt;B&gt;
Name: &#160;&lt;/B&gt; {=.Person().LastName} {=.Person().FirstName} &lt;/LI&gt;
&lt;LI&gt;
&lt;B&gt;
Birthdate: &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/B&gt;{=DateToString(.Person().BirthDate,"%d/%m/%y")}&lt;/LI&gt;
&lt;LI&gt;
&lt;B&gt;
Sex: &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/B&gt;{=.Persondata("sex")}&lt;/LI&gt;
&lt;LI&gt;
&lt;B&gt;
Ward: &#160;&#160;&#160;&#160;&#160;&lt;/B&gt; {=.Person().Stay().Ward.Name} &#160;&lt;/LI&gt;
&lt;LI&gt;
&lt;B&gt;
Room: &#160;&#160;&#160;&#160;&#160;&lt;/B&gt;{=.Person().Stay().Room} &#160;&lt;/LI&gt;
&lt;LI&gt;
&lt;B&gt;
Since: &#160;&#160;&#160;&#160;&#160;&lt;/B&gt;{= datetimetostring(.Person().Stay().StartTime, "%x")} &#160;&lt;/LI&gt;
&lt;/UL&gt;</pre><pre>
&lt;H2&gt; HLA type&lt;/H2&gt;
&lt;UL&gt;
&lt;LI&gt;Serol.: &lt;B&gt; {=.Person().GetMedicalRecord().HLATypeSero } &lt;/b&gt;&lt;/li&gt;
&lt;LI&gt;DNA: &lt;B&gt; {=.Person().GetMedicalRecord().HLATypeDNA } &#160;&lt;/b&gt;&lt;/LI&gt;
&lt;/UL&gt;</pre><pre>
&lt;H2&gt; HLA antibodies &lt;/H2&gt;
{:
PersonHLAantibody phab;
string s;
integer i;
Person prsn;</pre><pre>
i := 1;
prsn := .Person();
phab := prsn.HLAAntibodyByNumber(i);</pre><pre>
if phab = ? then return ""; endif;</pre><pre>
s := "&lt;table border=1&gt; &lt;tr align=center&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt;Present&lt;/td&gt; &lt;td&gt;R&lt;/td&gt; &lt;td&gt;Date&lt;/td&gt; &lt;/tr&gt;";</pre><pre>
while phab &lt;&gt; ? do
&#160;&#160;&#160;s := s + "&lt;tr align=center&gt; &lt;td&gt;&lt;b&gt;" + phab.Antibody.Name + "&lt;/b&gt;&lt;/td&gt;&lt;td&gt;";
&#160;&#160;&#160;if phab.Presence = ? then s := s + "?";
&#160;&#160;&#160;else s:= s + if phab.Presence then "YES" else "NO";
&#160;&#160;&#160;endif;
&#160;&#160;&#160;s := s + "&lt;/td&gt;&lt;td&gt;" + ifknownstring(tostring(phab.RValue,"%f")) + "&lt;/td&gt;&lt;td&gt;" +
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifknownstring(datetostring(phab.Day,"%x")) + "&lt;/td&gt; &lt;/tr&gt;"; &#160;
&#160;&#160;&#160;i := i + 1;
&#160;&#160;&#160;phab := prsn.HLAAntibodyByNumber(i);
done;
s := s + "&lt;/table&gt;";</pre><pre>
return s;
}</pre><pre>
&lt;H2&gt; Family &lt;/H2&gt;
&lt;UL TYPE="Square"&gt;
{:
PersonRelation prel;
PersonHLAantibody phab;
string s;
integer p, a;</pre><pre>
s := "";
p := 1;</pre><pre>
prel := .Person().Relation( "Family" , p);</pre><pre>
while prel &lt;&gt; ? do
&#160;&#160;&#160;s := s + "&lt;LI&gt;&lt;i&gt;" + prel.OtherPerson.Externalization + "&lt;/i&gt; (" + enumeratedtostring("PersonRelationType", prel.Type) &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ ")&lt;/LI&gt;&lt;UL&gt;" + chr(10);
&#160;&#160;&#160;s := s
&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ ifknownstring( "&lt;LI&gt;HLA Type Serol.: &lt;B&gt;" + prel.OtherPerson.GetMedicalRecord().HLATypeSero + "&lt;/B&gt;&lt;/li&gt;")
&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ ifknownstring( "&lt;LI&gt;HLA Type DNA: &lt;B&gt;" + prel.OtherPerson.GetMedicalRecord().HLATypeDNA + "&lt;/B&gt;&lt;/LI&gt;")
&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ chr(10);</pre><pre>
/* s := s + chr(123) + "&lt; HLA-antibody-list-HTML Person=" + tostring( prel.OtherPerson , "%d") + chr(125) + chr(10); */</pre><pre>
a := 1;
&#160;&#160;&#160;phab := prel.OtherPerson.HLAAntibodyByNumber(a);</pre><pre>
if phab &lt;&gt; ? 
&#160;&#160;&#160;then 
&#160;&#160;&#160;&#160;&#160;s := s + "&lt;LI&gt;HLA antibodies: &lt;table border=1&gt;&lt;tr align=center&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;Present&lt;/td&gt;&lt;td&gt;R&lt;/td&gt;&lt;td&gt;Date&lt;/td&gt;&lt;/tr&gt;";</pre><pre>
while phab &lt;&gt; ? do
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s := s + "&lt;tr align=center&gt; &lt;td&gt;&lt;b&gt;" + phab.Antibody.NAME + "&lt;/b&gt;&lt;/td&gt;&lt;td&gt;";
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if phab.Presence = ? then s := s + "?";
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else s:= s + if phab.Presence then "YES" else "NO";
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;endif;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s := s + "&lt;/td&gt;&lt;td&gt;" + ifknownstring(tostring(phab.RValue,"%f")) + "&lt;/td&gt;&lt;td&gt;" +
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifknownstring(datetostring(phab.Day,"%x")) + "&lt;/td&gt; &lt;/tr&gt;"; &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;a := a + 1;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phab := prel.OtherPerson.HLAAntibodyByNumber(a);
&#160;&#160;&#160;&#160;&#160;done;
&#160;&#160;&#160;&#160;&#160;s := s + "&lt;/table&gt;";
&#160;&#160;&#160;endif;
&#160;&#160;&#160;s := s + "&lt;/ul&gt;";
&#160;&#160;&#160;p := p + 1;
&#160;&#160;&#160;prel := .Person().Relation( "Family" , p);
done;</pre><pre>
return s;
}
&lt;/UL&gt;</pre><pre>
&lt;/BODY&gt;
&lt;/HTML&gt;</pre>
                    <p>&#160;</p>
                </td>
            </tr>
        </table>
        <p>Click the image to see the entire file:</p>
        <p style="text-align: center;"><a href="hla_datasheet.htm"><img src="hla_datasheet.gif" alt="" width="658" height="629" border="0" /></a>
        </p>
    </body>
</html>