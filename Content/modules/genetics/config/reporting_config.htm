<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Modules|Genetics|Configuration" data-mc-priority="0" data-mc-time-estimate="0" data-mc-id="v55\english\tutorials\basic routine\specimen query\specimenquery.htm">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Resources/TableStyles/Alternating.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <meta name="ProgId" content="FrontPage.Editor.Document" /><title>Reporting configuration</title>
        <link href="../../../Resources/StyleSheets/shared.css" rel="stylesheet" type="text/css" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" defer="defer" type="text/javascript">
        </script>
    </head>
    <body>
        <h1><a name="aanchor3964"></a>
            <MadCap:concept term="Genetics" />Reporting configuration</h1>
        <p>This chapter describes the configuration needed for results of genetic exams to appear on <a href="../routine/reporting.htm">genetic result reports</a>.</p>
        <div class="text_box_tips">
            <p><span style="color: #C29D0A; font-weight: bold;">Tip</span>
            </p>
            <ul>
                <li value="1">MISPL&#160;functions that can be used to report  locus and variant results for the extended Genetics module are described on the page <a href="mispl/reporting.htm">Site functions for reporting</a>.</li>
                <li value="2">Additionally, several preconfigured text modules are available on the general <a href="../../../routine/results/results_rich_text.htm#MISPL">Rich text results</a> page and can be defined for general reporting.</li>
            </ul>
        </div>
        <h2>Report properties</h2>
        <p>For results of a <a href="../routine/genetic_exam/g_e_introduction.htm">genetic exam</a> to appear on reports, the first step is to indicate a report <a href="../../../configuration/properties/properties.htm">property</a> with data type <span class="ui_element">Genetics</span> on the <a href="genetic_procedures.htm">genetic procedure</a> on which the genetic exam is based. When the genetic procedure is requested, a <a href="../routine/reporting.htm">report result</a> based on the indicated report property is created and added to the genetic exam. In routine, when this report result is reported, all the other results of the genetic exam will be reported as well.</p>
        <h2>Report templates</h2>
        <p>In the <a href="../../../configuration/report_templates/report_templates.htm">Report template</a> editor, </p>
        <ul>
            <li value="1">set the field <span class="ui_element">Generator</span> to <a href="../../report_builder/report_types/result_reports/report_builder_result_reports_report_templates.htm">Glims Report Builder</a> and the field <span class="ui_element">File type</span> to <span class="ui_element">XML</span>,</li>
            <li value="2">enable the option <a href="../../../configuration/report_templates/report_templates.htm#XML">Adaptive XML export</a>.</li>
            <li value="3">indicate a property classification. This property classification must contain the report property indicated on the genetic procedure.</li>
        </ul>
        <p>Add the created report template to the <span class="ui_element">Report template</span> field of a <a href="../../../configuration/default_reports/default_reports.htm">default report</a>.</p>
        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="reporting_config_templates.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="1485" data-mc-height="634" src="reporting_config_templates_thumb_0_120.png" tabindex="" /></a>
        </p>
        <h2>What is reported under which conditions?</h2>
        <h3>Results of the genetic exam's patient</h3>
        <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/Alternating.css');" class="TableStyle-Alternating" cellspacing="0">
            <col class="TableStyle-Alternating-Column-Column1" style="width: 85px;" />
            <col class="TableStyle-Alternating-Column-Column1" />
            <col class="TableStyle-Alternating-Column-Column1" />
            <thead>
                <tr class="TableStyle-Alternating-Head-Header1">
                    <th class="TableStyle-Alternating-HeadE-Column1-Header1">Table</th>
                    <th class="TableStyle-Alternating-HeadE-Column1-Header1">Conditions for reporting</th>
                    <th class="TableStyle-Alternating-HeadD-Column1-Header1">Exported data</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Alternating-Body-Body1">
                    <td class="TableStyle-Alternating-BodyE-Column1-Body1">Genetic exams</td>
                    <td class="TableStyle-Alternating-BodyE-Column1-Body1">
                        <p>The report property of the <a href="genetic_procedures.htm">genetic procedure</a>  linked to the genetic exam must be</p>
                        <ul>
                            <li value="1"> part of the <a href="../../../configuration/report_templates/report_templates.htm#Property">property classification</a> indicated on the report template,</li>
                            <li value="2"><a href="../../../configuration/properties/properties.htm#Report2">visible</a> on reports.</li>
                        </ul>
                        <p>&#160;</p>
                        <p>The genetic exam <a href="../routine/genetic_exam/g_e_browser.htm#Status">status</a> mapped to the result <a href="../routine/results/result_screen.htm">status</a> must be superior or equal to the <a href="../../../configuration/default_reports/default_reports.htm#Minimal">minimal result status</a> of the report.</p>
                    </td>
                    <td class="TableStyle-Alternating-BodyD-Column1-Body1">
                        <p>Mnemonic and description of the genetic procedure</p>
                        <p>Mnemonic and name of the suspected disorder of the genetic procedure</p>
                        <p> Number, name and history of the <a href="../routine/family/family_screen.htm">family</a></p>
                        <p>
                            <p>Mnemonic and name of the family's main suspected disorder</p>
                            <p><a href="../routine/family/family_screen.htm#Legend">Conditions</a> linked to disorders are NOT exported</p>
                        </p>
                        <p>Urgency</p>
                        <p>
Status
</p>
                        <p>End time</p>
                        <p>Request definition code and name of each <a href="../../../routine/orders/order_entry/order_entry_requested_codes.htm">requested code</a> of the genetic exam.  
</p>
                    </td>
                </tr>
                <tr class="TableStyle-Alternating-Body-Body2">
                    <td class="TableStyle-Alternating-BodyE-Column1-Body2">Root specimens</td>
                    <td class="TableStyle-Alternating-BodyE-Column1-Body2">The material of the specimen must be set as <a href="genetic_procedures.htm">material that can be used</a> on the genetic procedure.</td>
                    <td class="TableStyle-Alternating-BodyD-Column1-Body2">All the fields of the <a href="../../../routine/specimens/specimens_query.htm">Specimen</a> and <a href="../../../routine/specimens/specimen_info.htm">Specimen info</a> screens.</td>
                </tr>
                <tr class="TableStyle-Alternating-Body-Body1">
                    <td class="TableStyle-Alternating-BodyE-Column1-Body1">Derived specimens</td>
                    <td class="TableStyle-Alternating-BodyE-Column1-Body1">The materials of the direct and indirect child specimens of the root specimen must be set as <span class="ui_element">Materials that can be used</span> on the genetic procedure.</td>
                    <td class="TableStyle-Alternating-BodyD-Column1-Body1">All the fields of the <span class="ui_element">Specimen</span> and <span class="ui_element">Specimen info</span> screens.</td>
                </tr>
                <tr class="TableStyle-Alternating-Body-Body2">
                    <td class="TableStyle-Alternating-BodyE-Column1-Body2">Order</td>
                    <td class="TableStyle-Alternating-BodyE-Column1-Body2">&#160;</td>
                    <td class="TableStyle-Alternating-BodyD-Column1-Body2"><a href="../../../routine/specimens/specimen_info.htm#Pregnanc">Pregnancy duration</a>  in days (ActivePregnancyPeriod field on the Order table), relative to the order's lowest object time.                    </td>
                </tr>
                <tr class="TableStyle-Alternating-Body-Body1">
                    <td class="TableStyle-Alternating-BodyE-Column1-Body1">Results</td>
                    <td class="TableStyle-Alternating-BodyE-Column1-Body1">
                        <p>The result  status  must be superior or equal to the minimal result status of the report.</p>
                        <p>The properties linked to the results must be</p>
                        <ul>
                            <li value="1"> part of the property classification indicated on the report template,</li>
                            <li value="2">visible on reports.</li>
                        </ul>
                    </td>
                    <td class="TableStyle-Alternating-BodyD-Column1-Body1">
                        <p>Values of normal results (i.e. neither locus not variant results).</p>
                        <p>In the case of <a href="#Reportin">rich text results</a>, the raw value is exported (this is the value as entered manually or electronically).&#160;In the case of <a href="../../../routine/results/results_images.htm">image results</a>, the image path is exported.</p>
                    </td>
                </tr>
                <tr class="TableStyle-Alternating-Body-Body2">
                    <td class="TableStyle-Alternating-BodyE-Column1-Body2">Locus results</td>
                    <td class="TableStyle-Alternating-BodyE-Column1-Body2">
                        <p>Must belong to a genetic exam that is part of the export.</p>
                        <p>Must be set to <a href="../routine/results/result_screen.htm#Rp.">Reportable</a>.</p>
                        <p>The locus result  status mapped to the result status must be superior or equal to the minimal result status of the report.</p>
                        <p>The properties linked to the locus results must be visible on reports.</p>
                    </td>
                    <td class="TableStyle-Alternating-BodyD-Column1-Body2">
                        <p>All the fields, including the fields of the related <a href="genome/loci.htm">locus</a> record.</p>
                        <p>If the locus type is <span class="ui_element">Gene</span>:  for each code attached to the <a href="genome/codes.htm">gene</a>, the code value and the mnemonic of the coding system.</p>
                        <p>The names and values of all related locus result <a href="results/results_config.htm#Addition">details</a>.</p>
                        <p>The locus members of the locus groups.</p>
                    </td>
                </tr>
                <tr class="TableStyle-Alternating-Body-Body1">
                    <td class="TableStyle-Alternating-BodyE-Column1-Body1">Variant results</td>
                    <td class="TableStyle-Alternating-BodyE-Column1-Body1">
                        <p>Must belong to a genetic exam that is part of the export.</p>
                        <p>Must be set to <span class="ui_element">Reportable</span>.</p>
                        <p>The variant result  status mapped to the result status must be superior or equal to the minimal result status of the report.</p>
                        <p>The properties linked to the variant results must be visible on reports.</p>
                    </td>
                    <td class="TableStyle-Alternating-BodyD-Column1-Body1">
                        <p>All the fields, including the fields and the annotations of the related <a href="variants/variants.htm">variant</a> record.</p>
                        <p>
For CNVs, <span class="ui_element">Default transcript</span> and <span class="ui_element">Gene</span> fields
of all <a href="variants/variants.htm#GeneCNV">CNV genes</a>.</p>
                        <p> For each <a href="variants/variants_codes.htm">code</a> attached to the variant, the code value and the mnemonic of the coding system.</p>
                    </td>
                </tr>
                <tr class="TableStyle-Alternating-Body-Body2">
                    <td class="TableStyle-Alternating-BodyB-Column1-Body2">Approaches</td>
                    <td class="TableStyle-Alternating-BodyB-Column1-Body2">&#160;</td>
                    <td class="TableStyle-Alternating-BodyA-Column1-Body2">Mnemonics of the approach plans on which the non-discontinued approaches are based.</td>
                </tr>
            </tbody>
        </table>
        <div class="text_box_notes">
            <p><span style="color: #616E14; font-weight: bold;">Note</span>
            </p>
            <p>Currently, pedigrees can only be exported as image results.&#160;Therefore, if you want to export pedigrees,</p>
            <ol>
                <li value="1">take  screenshots and save them as image files.</li>
                <li value="2">create  <a href="../../../routine/results/results_images.htm">image results</a> with the image file paths as values.</li>
            </ol>
        </div>
        <h3><a name="Results"></a>Results of the patient's parents</h3>
        <p>To report the genetic exams and results of the patient's mother and/or father, </p>
        <ol>
            <li value="1">create a dummy property (the data type of this property is irrelevant),</li>
            <li value="2">add this dummy property to the property classification of the report template,</li>
            <li value="3">create a property classification node for this property,</li>
            <li value="4">
                <p>in the <a href="../../../configuration/property_classifications/property_classifications.htm#Content">Content</a> field of this property classification node,  add a site function containing, for instance, .Person.Mother and the MISPL functions <a href="mispl/genetic_exam_m_father.htm">GetFather</a>, <a href="mispl/reporting.htm">GetLocusResult</a> and <a href="mispl/reporting.htm#GetVaria">GetVariantResult</a>:</p>
                <div class="text_box_examples">
                    <p><span style="color: #003366; font-weight: bold;">Example</span>
                    </p>
                    <p>The following Object-based site function allows you to retrieve the value of the confirmed result for locus FRM1. If this value is not known, the function returns the message "Mother not tested yet".</p>
                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="reporting_config_site_function.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="2089" data-mc-height="779" src="reporting_config_site_function_thumb_0_120.png" tabindex="" /></a>
                    </p><pre xml:space="preserve">string TheValue;
TheValue :=  .Person().Mother.Object.GetLocusResult("FRM1", LocusResultStatus["Confirmed"], ?, 1).RawValue ;
RETURN  IF TheValue = ? THEN "Mother not tested yet"  ELSE TheValue ;</pre>
                </div>
            </li>
        </ol>
        <h2><a name="Reportin"></a>Reporting Rich text fields</h2>
        <p>This section describes how to make the content of Rich text fields appear on Jasper reports.</p>
        <h3>Update templates</h3>
        <p>The <a href="../../report_builder/concept/report_builder_jasper_templates.htm">jasper report templates</a> must be updated. In the&#160;<span class="ui_element">Text field</span> tab, the <span class="ui_element">Markup</span> field must be set to <span class="ui_element">HTML</span>:</p>
        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="reporting_config_markup.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="308" data-mc-height="265" src="reporting_config_markup_thumb_0_120.png" tabindex="" /></a>
        </p>
        <h3>Limitations</h3>
        <p>Rich text results on reports may look somewhat different their counterparts in the Rich text editor: images are not shown, some fonts are not supported, etc. Click <a href="http://jasperreports.sourceforge.net/sample.reference/styledtext/index.html">here</a> for more information.</p>
        <p>The following chapter explains how to <a href="../../report_builder/tutorials/report_builder_add_fonts_in_PDF.htm">add fonts in PDF reports</a>.</p>
        <h2><a name="Reportin2"></a>Reporting Rich text results</h2>
        <h3>Configuration</h3>
        <p>In addition to the configuration describe above for the reporting of Rich text fields, a specific configuration step is required for the raw value of <a href="../../../routine/results/results_rich_text.htm">Rich text results</a> to appear on jasper reports.</p>
        <p>In the jasper report template, you can for instance configure a rich-text band similar to an image band. The ‘Print When Expression’ for the band would then be ‘Boolean.valueOf($F{Detail.ReportStyle}.equals("Rich text"))’:</p>
        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="reporting_config_jasper.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="812" data-mc-height="566" src="reporting_config_jasper_thumb_0_120.png" tabindex="" /></a>
        </p><pre><p>&lt;band height="167"&gt;</p><p>	&lt;printWhenExpression&gt;&lt;![CDATA[Boolean.valueOf($F{Detail.ReportStyle}.equals("Rich text"))]]&gt;&lt;/printWhenExpression&gt;</p><p>	&lt;textField isStretchWithOverflow="true" isBlankWhenNull="true"&gt;</p><p>		&lt;reportElement x="7" y="7" width="516" height="143" uuid="ea32f87a-33ac-4dd0-9f96-60f13a7652b4"/&gt;</p><p>		&lt;textElement markup="html"&gt;</p><p>			&lt;font fontName="Arial"/&gt;</p><p>		&lt;/textElement&gt;</p><p>		&lt;textFieldExpression&gt;&lt;![CDATA[$F{Detail.Value}]]&gt;&lt;/textFieldExpression&gt;</p><p>	&lt;/textField&gt;</p><p>&lt;/band&gt;</p></pre>
        <p>In the generated XML file, the tag &lt;ReportStyle&gt; will contain "Rich text" and &lt;value&gt; will contain the HTML text of the Rich text result:</p>
        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="reporting_config_xml.png"><img class="MCPopupThumbnail img imgLargeImage" data-mc-width="1043" data-mc-height="177" src="reporting_config_xml_thumb_0_120.png" tabindex="" /></a>
        </p>
        <div class="text_box_notes">
            <p><span style="color: #616E14; font-weight: bold;">Note</span>
            </p>
            <p>In the present case, the <a href="../../../configuration/properties/properties.htm#Report">report format</a> configured on the property is overridden.</p>
        </div>
    </body>
</html>