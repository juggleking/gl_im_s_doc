<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Communication|CyberLab communication|CyberLab -&gt; GLIMS" data-mc-priority="0" data-mc-time-estimate="0" data-mc-id="v55\english\tutorials\cyberlab\ordercommunication_cyberlab-glims.htm">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <meta name="ProgId" content="FrontPage.Editor.Document" /><title>CyberLab - Order communication to GLIMS</title>
        <link href="../../Resources/StyleSheets/shared.css" rel="stylesheet" type="text/css" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" defer="defer" type="text/javascript">
        </script>
    </head>
    <body>
        <h1><a name="kanchor1"></a><a href="index_cyberlab_communication.htm" name="kanchor2">CyberLab communication</a> -&gt; Order communication from CyberLab to GLIMS</h1>
        <ul>
            <li class="kadov-p" value="1"><a href="#Configuration%20mapping%20between%20CyberLab%20and%20GLIMS">Configuration mapping between CyberLab and GLIMS</a>
            </li>
            <li class="kadov-p" value="2"><a href="#Creating%20a%20CyberLab%20user%20for%20batch%20import%20of%20CyberLab%20orders">Editing the CyberLab user for batch import of CyberLab orders</a>
            </li>
            <li class="kadov-p" value="3"><a href="#Service%20and%20Translator%20configuration">Service and translator configuration</a>
            </li>
            <li class="kadov-p" value="4"><a href="#Order%20entry%20field%20mapping">Order entry field mapping</a>
            </li>
            <li class="kadov-p" value="5"><a href="#Sample_and_order_labels">Sample and order labels</a>
            </li>
        </ul>
        <h2><a name="Configuration mapping between CyberLab and GLIMS"></a>Configuration mapping between CyberLab and GLIMS</h2>
        <p>In order to ensure correct order communication between CyberLab and GLIMS, some basic configuration data in GLIMS and CyberLab must be mapped.</p>
        <h3>Request definitions</h3>
        <p>The code of the request definitions defined in CyberLab must be identical to the mnemonic of the request definitions (Start -&gt; Configuration -&gt; Request definitions -&gt; Request definitions) defined in GLIMS.&#160;&#160;In CyberLab, the request definition coding system defined in the ORM daemon will determine which request definition codes are sent to GLIMS.</p>
        <p>The fact that GLIMS accepts/rejects messages with unknown request definitions is based on an environment variable for the internal service. The default value is that GLIMS rejects a message with an unknown request and that the order is never created in GLIMS. This can be overwritten by enabling the following service option through the driver.</p>
        <blockquote>
            <dl>
                <dt><b>OrderAddRequestErrorHandler</b>
                </dt>
                <dd>'Halt' : halt the order import, do not create the order and reject the inbound message</dd>
                <dd>'ContinueAndReject' : continue with order creation and reject the inbound message</dd>
                <dd>'ContinueAndAccept'&#160;&#160;: continue with order creation and accept the inbound message</dd>
            </dl>
        </blockquote>
        <h4>Dynamic tests</h4>
        <p>There are 2 ways to configure dynamic tests, in Glims or in CyberLab. Do not make a mixture of both algorithms.</p>
        <p>Dynamic tests configured in CyberLab: The request definition is defined as a dynamic request definition in CyberLab. CyberLab will decide on the number of tubes needed and collection times.&#160;&#160;The code of the request definition defined in CyberLab must be identical to the mnemonic of a individual request definition in GLIMS.</p>
        <p>Dynamic tests configured in GLIMS: The request definition is defined as a single value request definition in CyberLab.&#160;&#160;The code of the request definition defined in CyberLab must be identical to the mnemonic of a panel request definition in GLIMS (Dynamic tests are configured via panel request definitions). GLIMS will decide on the number of tubes needed and collection times.</p>
        <h4>Panels</h4>
        <p>The panel request definition in GLIMS must be defined as a single value request definition in CyberLab (GLIMS mnemonic must be identical to CyberLab code).&#160;</p>
        <h3>Request definition variables</h3>
        <p>The code of the request definition variables defined in CyberLab must be identical to the mnemonic of the properties defined in GLIMS.&#160;&#160;In CyberLab, the request definition variable coding system defined in the ORM daemon will determine which request definition variable codes are sent to GLIMS.</p>
        <h3>Materials</h3>
        <p>GLIMS determines the materials needed for the request definitions sent by CyberLab, just as you would enter these request definitions in the GLIMS order entry screen.</p>
        <h3>Patient identifications</h3>
        <p>If CyberLab downloads unknown patients to GLIMS, they are created. Updates for patient demographics are stored.</p>
Both in GLIMS and CyberLab, the patient identifications must be assigned by the same HIS.&#160;
<ul><li class="kadov-p" value="1"><b style="font-weight: bold;">CyberLab</b>: in the Order daemon, you can specify a patient coding system which determines which patient codes are sent to GLIMS.&#160;&#160;This coding system must be the one specified in CyberLab's patient daemon.<br />&#160;&#160;&#160;</li><li class="kadov-p" value="2"><b style="font-weight: bold;">GLIMS</b>: the patient identification provider must be defined in the order entry options of the CyberLab batch user (see below).&#160;&#160;Naturally, this provider must refer to the same HIS as used by CyberLab.</li></ul><h2><a name="Creating a CyberLab user for batch import of CyberLab orders"></a>Editing the CyberLab user for batch import of CyberLab orders</h2><p>Select the CyberLab batch user you created for <a href="cyberlab_glims_reports.htm#Configuring%20a%20translator">reporting results from GLIMS to CyberLab</a> (Start -&gt; System management -&gt; Security -&gt; Users).&#160;&#160;</p><p style="text-align: left;">This user must be assigned to any defined lab department.&#160;&#160;If not result creation/update will not be allowed (e.g. informational tests with a value received in CyberLab).&#160;&#160;Select the user you just created and choose the contextual menu function 'Employment'.&#160;&#160;Assign the user to an arbitrary department.</p><p style="text-align: center;"><img src="cyberlab_userdepartment.gif" alt="" width="492" height="438" border="0" /></p><p style="text-align: left;">Now enable the user by checking the 'Enabled' option in the User editor.&#160;&#160;You must first enable the CyberLab batch user in order to be able to login with this user and set the necessary order entry options.&#160;&#160;Once the configuration is completed, this user must be disabled again in order to be able to process the order import batch task.</p><p style="text-align: left;">Now login with this CyberLab user in order to set its order entry options.&#160;&#160;For a full description of all order entry options, please check the <a href="../../routine/orders/order_entry/options/index_order_entry_options.htm">order entry options manual</a>.</p><blockquote><p style="text-align: left;">One very important field: <b>Identification source</b>.&#160;&#160;The correspondent specified in this field will be the <b>patient identification provider</b> for patients that arrive in GLIMS via order import.&#160;&#160;In a hospital environment with an ADT connection, the HIS must be set as Identification source in order entry AND as PIN provider in the <a href="cyberlab_glims_reports.htm">CyberLab report generation screen</a>.&#160;&#160;By doing so, both GLIMS and CyberLab will communicate with the same patient identifications.&#160;&#160;This implies that you should not manually create patients in CyberLab.&#160;&#160;The latter would not be recognized in GLIMS and would be created as new patients in GLIMS !!</p><p style="text-align: left;">Do not forget to disable the CyberLab batch user after having configured the order entry options !</p></blockquote><p style="text-align: left;" /><h2><a name="Service and Translator configuration"></a>Service and translator configuration</h2><h3>Creating a service</h3><p>The services are directly accessible from the main menu via <i>Start</i> -&gt; <i>System management</i> -&gt; <i>Services</i> -&gt; <i>Services</i>.</p><p style="text-align: center;"><img src="cyberlab_orm_service.gif" alt="" width="602" height="366" border="0" /></p><ul><li class="p" value="1"><p style="text-align: left;"><b style="font-weight: bold;">Name</b>: free to choose</p></li><li class="p" value="2"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Type</span></b>: must be set to 'Translator server'</p></li><li class="p" value="3"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Login user</span></b>: specify the CyberLab batch user</p></li><li class="p" value="4"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Port</span></b>: free to choose</p></li></ul><h3>Creating a translator</h3><h4>Introduction</h4><blockquote><p>The translators are directly accessible from the main menu via <i>Start</i> -&gt; <i>System management</i> -&gt; <i>Services</i> -&gt; <i>Translators</i>.</p></blockquote><h4>Unidirectional communication (specimen scheduling in CyberLab)</h4><blockquote><p>Unidirectional communication implies that CyberLab does its own sample scheduling and label generation.&#160;&#160;In this case, the "cybo" driver should be used.</p></blockquote><p style="text-align: center;"><img src="cyberlab_orm_translator.gif" alt="" width="602" height="387" border="0" /></p><blockquote><ul><li class="p" value="1"><p style="text-align: left;"><b style="font-weight: bold;">Name</b>: free to choose</p></li><li class="p" value="2"><p style="text-align: left;"><b style="font-weight: bold;">Time out</b>: we advise a time-out of 30s.&#160;</p></li><li class="p" value="3"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Internal service</span></b>: specify the service that you created for CyberLab order import.</p></li><li class="p" value="4"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Driver</span></b>: cybo</p></li><li class="p" value="5"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Specific options</span></b>:&#160;specify the following options: -s 6333 -u R=1,A=2 -v 2.3</p></li></ul></blockquote><h4 style="text-align: left;">Bidirectional communication (specimen scheduling in LIS)</h4><blockquote><p style="text-align: left;">Bidirectional communication is used when CyberLab receives samples and labels from Glims.&#160;&#160;In this case the "homl" translator should be used.</p></blockquote><p style="text-align: center;"><img src="cyberlab_homl.gif" style="border: none;" alt="" width="581" height="333" border="0" /></p><blockquote><ul><li class="p" value="1"><p style="text-align: left;"><b style="font-weight: bold;">Name</b>: free to choose</p></li><li class="p" value="2"><p style="text-align: left;"><b style="font-weight: bold;">Time out</b>: we advise a time-out of 30s.&#160;</p></li><li class="p" value="3"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Internal service</span></b>: specify the service that you created for CyberLab order import.</p></li><li class="p" value="4"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Driver</span></b>: homl</p></li><li class="p" value="5"><p style="text-align: left;"><b style="font-weight: bold;"><span style="color: #FF0000;">Specific options</span></b>:&#160;specify the following options: -s 6000 -n 2 -k ZSD,ZOD,NTE(OD) -u R,A,P,S -r IERPFX -x InstanceId</p></li></ul></blockquote><h2 style="text-align: left;"><a name="Order entry field mapping"></a>Order entry field mapping</h2><h3 style="text-align: left;">CyberLab -&gt; GLIMS order field mapping</h3><table width="75%"><tr><td style="width: 30%;" bgcolor="#EFEFEF"><b style="font-weight: bold;">CyberLab&#160;</b></td><td bgcolor="#EFEFEF"><b style="font-weight: bold;">GLIMS</b></td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Code</td><td bgcolor="#EFEFEF">Order short id</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Collection time</td><td bgcolor="#EFEFEF">Object date/time</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Confidentiality</td><td bgcolor="#EFEFEF"><i style="font-style: italic;">Not used</i></td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Priority</td><td bgcolor="#EFEFEF">Urgency (mapping via cybo/homl startup option '-u')<br />The order priority is a calculated field which contains the highest priority of the requests.</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Requesting location</td><td bgcolor="#EFEFEF">Agent (If CyberLab downloads an unknown Requesting location, the location is not created in GLIMS)</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Issuer</td><td bgcolor="#EFEFEF">Issuer (If CyberLab downloads an unknown Issuer, the issuer is not created in GLIMS)</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Phone number</td><td bgcolor="#EFEFEF">Phone</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Order comment variables</td><td bgcolor="#EFEFEF">Question</td></tr></table><h3>GLIMS -&gt; CyberLab sample field mapping (specimen scheduling in LIS)</h3><p>In case of bidirectional communication, CyberLab receives sample info from GLIMS.&#160;&#160;Glims sends sample information for every request in the order. Glims does not send information about samples that don't have any request scheduled for them.&#160;&#160;The table below documents the sample fields CyberLab receives from Glims and their mapping:<br />&#160;&#160;</p><table id="table1" width="75%"><tr><td style="width: 30%;" bgcolor="#EFEFEF"><b style="font-weight: bold;">CyberLab&#160;</b></td><td bgcolor="#EFEFEF"><b style="font-weight: bold;">GLIMS</b></td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Sample LIS&#160;Code&#160;&#160;</td><td bgcolor="#EFEFEF">Specimen Internal Id</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Sample Target Collection Time</td><td bgcolor="#EFEFEF">Specimen Sampling Time</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Specimen Source Code&#160;</td><td bgcolor="#EFEFEF">Material Mnemonic</td></tr><tr><td style="width: 30%;" bgcolor="#EFEFEF">Specimen Source Description</td><td bgcolor="#EFEFEF">Material Description</td></tr></table><h2><a name="Sample_and_order_labels" id="Sample_and_order_labels"></a>Samples and labels</h2><h3>Specimen scheduling in CyberLab</h3><h4>Specimen confirmation</h4><blockquote><p>I you want to automatically confirm the availability of the specimens when the order is created in GLIMS, you can enable the order entry option "Automatic sample login" for the CyberLab batch user.</p></blockquote><h4>Labels</h4><blockquote><p>In case of specimen scheduling in CyberLab, the final sample labels will have to be printed by the LIS.&#160;There are several ways to do so in GLIMS.&#160;&#160;If you want the labels to printed as soon as the order is received in the LIS, you need to set some order entry options for the CyberLab batch user:</p><h4>Order labels</h4><ul><li value="1">Order label 1: if set, the order label defined in the specific site module (Start -&gt; System management -&gt; Customize -&gt; GLIMS) will printed</li><li value="2">Order label 2: if set, the Order-based text module with mnemonic "OrderLabel2" will be printed</li></ul><h4>Sample labels</h4><ul><li value="1">Root specimen labels: these are the own labels of the root samples. These labels can be defined at material level or at procedure input level.</li></ul></blockquote><h3>Specimen scheduling in LIS</h3><h4>Specimen confirmation</h4><blockquote><p>To avoid the automatic confirmation of the specimens when the order is created in GLIMS, you should disable the order entry option "Automatic sample login" for the CyberLab batch user.</p></blockquote><h4>Labels</h4><blockquote><p>In case of specimen scheduling in the LIS,&#160;&#160;Glims can send sample and order labels to CyberLab.&#160;&#160;<span style="color: #FF0000;">In this case, you should <b>NOT</b> enable the corresponding settings in the order entry options of the CyberLab batch user as this wil actually <b>PRINT</b> the labels.&#160;&#160;If order/sample labels are defined in GLIMS they will always be sent to CyberLab, regardless of the settings in the order entry options.</span></p><h4>Order labels</h4><ul><li value="1">The order label defined in the specific site module (Start -&gt; System management -&gt; Customize -&gt; GLIMS) will be sent to CyberLab</li><li value="2">The Order-based text module with mnemonic "OrderLabel2" will be sent to CyberLab as order label</li></ul><h4>Sample labels</h4><blockquote><p>The own labels of the root samples are sent to CyberLab. These labels can be defined at material level or at procedure input level.</p></blockquote></blockquote></body>
</html>