<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>GLIMS reference guide - Encounter</title>
        <link rel="stylesheet" href="RefGuide.css" type="text/css" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" defer="defer" type="text/javascript">
        </script>
    </head>
    <body>
        <h1><a name="aanchor283"></a>
            <MadCap:concept term="Database manual" />
            <table width="99%">
                <tr>
                    <td class="Title">
Encounter&#160;
</td>
                    <td class="NavigationBar"><a href="RefHelp.htm">Help</a> | <a href="#Fields">Fields</a> | <a href="#MenuFunctions">Menu functions</a> | <a href="#MISPLFunctions">MISPL functions</a> | <a href="#Children">Children</a> | <a href="#Queries">Queries</a></td>
                </tr>
            </table>
        </h1>
        <table class="ClassInfo">
            <tr>
                <th align="Left">
Name</th>
                <th align="Left">
Short name</th>
                <th align="Left">
Database</th>
                <th align="Left">
Creation logging</th>
                <th align="Left">
Update logging</th>
                <th align="Left">
Extended logging</th>
            </tr>
            <tr>
                <td>
Encounter</td>
                <td>
enct</td>
                <td>
glims</td>
                <td>
yes</td>
                <td>
yes</td>
                <td>
Normal</td>
            </tr>
        </table>
        <p>
Contact between a person and an institution for observation or treatment. Note that for one patient encounters should not overlap. It can be used as an administrative grouping level of hospital laboratory results.</p><a name="Fields"></a>
        <h2>
Fields</h2><a name="F_Automatic"></a>
        <h3>
Automatic</h3>
        <div class="MemberHelp">
            <p>
This field indicates whether the encounter has been created automatically.</p>
            <p class="Synopsis"><span class="Properties">Mandatory </span><span class="Type">Logical</span>&#160;<b>Automatic</b></p>
        </div><a name="F_CreationTime"></a>
        <h3>
Creation time</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Automatic </span><span class="Type">DateTime</span>&#160;<b>CreationTime</b></p>
        </div><a name="F_CreationUser"></a>
        <h3>
Creation user</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Automatic </span><span class="Type"><a href="usr.htm">sc_User</a></span>&#160;<b>CreationUser</b></p>
        </div><a name="F_EndTime"></a>
        <h3>
End</h3>
        <div class="MemberHelp">
            <p>
Encounter's end date and time</p>
            <p class="Synopsis"><span class="Type">DateTime</span>&#160;<b>EndTime</b></p>
        </div><a name="F_EndTimeCalculated"></a>
        <h3>
End time calculated</h3>
        <div class="MemberHelp">
            <p>
Indicates if current end time is calculated (based on encounter type default period)</p>
            <p class="Synopsis"><span class="Properties">Mandatory Automatic </span><span class="Type">Logical</span>&#160;<b>EndTimeCalculated</b></p>
        </div><a name="F_ExternalId"></a>
        <h3>
External id</h3>
        <div class="MemberHelp">
            <p>
Alternate identification of encounter</p>
            <p class="Synopsis"><span class="Type">String</span>&#160;<b>ExternalId</b></p>
        </div><a name="F_ExternalInfo"></a>
        <h3>
External info</h3>
        <div class="MemberHelp">
            <p>
External information (e.g. inpatient/outpatient/external, ...)</p>
            <p class="Synopsis"><span class="Type">String</span>&#160;<b>ExternalInfo</b></p>
        </div><a name="F_Id"></a>
        <h3>
Id</h3>
        <div class="MemberHelp">
            <p>
Primary key. Automatically generated identifier whose value uniquely identifies each record.</p>
            <p class="Synopsis"><span class="Properties">Mandatory Unique Automatic </span><span class="Type"><a href="#" class="selected">Encounter</a></span>&#160;<b>Id</b></p>
        </div><a name="F_Institution"></a>
        <h3>
Institution</h3>
        <div class="MemberHelp">
            <p>
This field indicates the institution where the person has the encounter.</p>
            <p class="Synopsis"><span class="Properties">Mandatory </span><span class="Type"><a href="inst.htm">Institution</a></span>&#160;<b>Institution</b></p>
        </div><a name="F_LastUpdateTime"></a>
        <h3>
Last update time</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Automatic </span><span class="Type">DateTime</span>&#160;<b>LastUpdateTime</b></p>
        </div><a name="F_LastUpdateUser"></a>
        <h3>
Last update user</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Automatic </span><span class="Type"><a href="usr.htm">sc_User</a></span>&#160;<b>LastUpdateUser</b></p>
        </div><a name="F_Person"></a>
        <h3>
Person</h3>
        <div class="MemberHelp">
            <p>
This field specifies the person associated with the encounter.</p>
            <p class="Synopsis"><span class="Properties">Mandatory </span><span class="Type"><a href="prsn.htm">Person</a></span>&#160;<b>Person</b></p>
        </div><a name="F_Physician"></a>
        <h3>
Physician</h3>
        <div class="MemberHelp">
            <p>
This field contains the attending physician.</p>
            <p class="Synopsis"><span class="Type"><a href="hcpr.htm">HCProvider</a></span>&#160;<b>Physician</b></p>
        </div><a name="F_StartTime"></a>
        <h3>
Start</h3>
        <div class="MemberHelp">
            <p>
Encounter's start date and time</p>
            <p class="Synopsis"><span class="Type">DateTime</span>&#160;<b>StartTime</b></p>
        </div><a name="F_Stay"></a>
        <h3>
Stay</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Calculated </span><span class="Type">String</span>&#160;<b>Stay</b></p>
        </div><a name="F_Type"></a>
        <h3>
Type</h3>
        <div class="MemberHelp">
            <p>
Type of encounter</p>
            <p class="Synopsis"><span class="Properties">Mandatory </span><span class="Type"><a href="entp.htm">EncounterType</a></span>&#160;<b>Type</b></p>
        </div><a name="F_Version"></a>
        <h3>
Version</h3>
        <div class="MemberHelp">
            <p>
Record version number. Automatically incremented each time the contents of a record changes.</p>
            <p class="Synopsis"><span class="Properties">Automatic </span><span class="Type">PositiveInteger</span>&#160;<b>Version</b></p>
        </div><a name="MenuFunctions"></a>
        <h2>
Menu functions</h2><a name="M_Contracts"></a>
        <h3>
Contracts&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Contracts</b> ()</p>
        </div><a name="M_Diagnoses"></a>
        <h3>
Diagnoses&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Diagnoses</b> ()</p>
        </div><a name="M_Doubles"></a>
        <h3>
Doubles&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Doubles</b> (<span class="Type">String</span>&#160;<span class="Parameter">QueryParameterList</span>)</p>
            <dl>
                <dt><span class="Type">String</span>&#160;<span class="Parameter">QueryParameterList</span></dt>
            </dl>
        </div><a name="M_Institution"></a>
        <h3>
Institution&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Institution</b> ()</p>
        </div><a name="M_Merge"></a>
        <h3>
Merge&#160;
</h3>
        <div class="MemberHelp">
            <p>
Merges an encounter with another encounter</p>
            <p class="Synopsis"><span class="Properties">MultiRecord </span><span class="Type">Void</span>&#160;<b>Merge</b> ()</p>
        </div><a name="M_Orders"></a>
        <h3>
Orders&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Orders</b> ()</p>
        </div><a name="M_DiagnosisOutline"></a>
        <h3>
Outline&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>DiagnosisOutline</b> ()</p>
        </div><a name="M_Person"></a>
        <h3>
Person&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Person</b> ()</p>
        </div><a name="M_Physician"></a>
        <h3>
Physician&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Physician</b> ()</p>
        </div><a name="M_ReportGroups"></a>
        <h3>
Report groups&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>ReportGroups</b> ()</p>
        </div><a name="M_Reports"></a>
        <h3>
Reports&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Reports</b> ()</p>
        </div><a name="M_RunProcedure"></a>
        <h3>
Run procedure&#160;
</h3>
        <div class="MemberHelp">
            <p>
Runs an external procedure supplied by your software dealer.
<br />This function will not be added automatically to the menu.</p>
            <p class="Synopsis"><span class="Properties">MultiRecord </span><span class="Type">Void</span>&#160;<b>RunProcedure</b> (<span class="Type">String</span>&#160;<span class="Parameter">FunctionMnemonic</span>, <span class="Type">String</span>&#160;<span class="Parameter">FunctionParameters</span>)</p>
            <dl>
                <dt><span class="Type">String</span>&#160;<span class="Parameter">FunctionMnemonic</span></dt>
                <dt><span class="Type">String</span>&#160;<span class="Parameter">FunctionParameters</span></dt>
                <dd>
The parameters required for the external procedure</dd>
            </dl>
        </div><a name="M_Stays"></a>
        <h3>
Stays&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Stays</b> ()</p>
        </div><a name="M_Type"></a>
        <h3>
Type&#160;
</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Type">Void</span>&#160;<b>Type</b> ()</p>
        </div><a name="MISPLFunctions"></a>
        <h2>
MISPL functions</h2><a name="M_Close"></a>
        <h3>
Close&#160;
</h3>
        <div class="MemberHelp">
            <p>
This MISPL function allows to close an encounter on the specified target time</p>
            <p class="Synopsis"><span class="Type">Logical</span>&#160;<b>Close</b> (<span class="Type">DateTime</span>&#160;<span class="Parameter">TargetTime</span>)</p>
            <dl>
                <dt><span class="Type">DateTime</span>&#160;<span class="Parameter">TargetTime</span></dt>
            </dl>
        </div><a name="M_FindContract"></a>
        <h3>
FindContract&#160;
</h3>
        <div class="MemberHelp">
            <p>
This MISPL function allows to retrieve an encounter's contract corresponding to the specified target time.</p>
            <p class="Synopsis"><span class="Type"><a href="cntr.htm">Contract</a></span>&#160;<b>FindContract</b> (<span class="Type">DateTime</span>&#160;<span class="Parameter">TargetTime</span>)</p>
            <dl>
                <dt><span class="Type">DateTime</span>&#160;<span class="Parameter">TargetTime</span></dt>
            </dl>
        </div><a name="M_FindStay"></a>
        <h3>
FindStay&#160;
</h3>
        <div class="MemberHelp">
            <p>
This MISPL function allows to retrieve a person's stay corresponding to the specified target time.
<br /><br />Remark: There also exists a MISPL function Stay on the Person table. However, the latter does not allow specifying a date and always returns the latest stay. (check out the documentation on Person)</p>
            <p class="Synopsis"><span class="Type"><a href="stay.htm">Stay</a></span>&#160;<b>FindStay</b> (<span class="Type">DateTime</span>&#160;<span class="Parameter">TargetTime</span>)</p>
            <dl>
                <dt><span class="Type">DateTime</span>&#160;<span class="Parameter">TargetTime</span></dt>
            </dl>
        </div><a name="M_GetDiagnosis"></a>
        <h3>
GetDiagnosis&#160;
</h3>
        <div class="MemberHelp">
            <p>
Gets the next Diagnosis referring to the current encounter. The diagnosis with the highest diagnosis time and latest creation time is returned first.</p>
            <p class="Synopsis"><span class="Type"><a href="diag.htm">Diagnosis</a></span>&#160;<b>GetDiagnosis</b> (<span class="Type"><a href="diag.htm">Diagnosis</a></span>&#160;<span class="Parameter">Previous</span>, <span class="Type">String</span>&#160;<span class="Parameter">Code</span>)</p>
            <dl>
                <dt><span class="Type"><a href="diag.htm">Diagnosis</a></span>&#160;<span class="Parameter">Previous</span></dt>
                <dd>
Previous diagnosis that was fetched. When unknown, the most recent one will be returned. Use this parameter to loop through all log entries:
<br /><br />Diagnosis Current;
<br /><br />Current := .GetDiagnosis(?, ?);
<br />WHILE Current &lt;&gt; ?
<br />DO
<br />    /* Processing code */
<br />    Current := .GetDiagnosis(Current, ?);
<br />DONE;</dd>
                <dt><span class="Type">String</span>&#160;<span class="Parameter">Code</span></dt>
                <dd>
If specified, only diagnoses with this code are considered</dd>
            </dl>
        </div><a name="M_HasStay"></a>
        <h3>
HasStay&#160;
</h3>
        <div class="MemberHelp">
            <p>
Checks if within the current encounter a stay can be found in at least one of the specified wards.</p>
            <p class="Synopsis"><span class="Type">Logical</span>&#160;<b>HasStay</b> (<span class="Type">DateTime</span>&#160;<span class="Parameter">ReferenceTime</span>, <span class="Type">String</span>&#160;<span class="Parameter">WardMnemonicList</span>)</p>
            <dl>
                <dt><span class="Type">DateTime</span>&#160;<span class="Parameter">ReferenceTime</span></dt>
                <dd>
If specified, only stays with an older transfer time will be evaluated.</dd>
                <dt><span class="Type">String</span>&#160;<span class="Parameter">WardMnemonicList</span></dt>
                <dd>
Comma-separated list of ward mnemonics. Special characters are "*" (= all) and "!" (= not). Examples:
<br />"*" Allow all wards
<br />"!X,*" Restricts ward "X" only and allows all others
<br />"X,!ABC,A*" Valid wards are "X" and any ward beginning with "A", except "ABC"</dd>
            </dl>
        </div><a name="Children"></a>
        <h2>
Children</h2>
        <h3>
Persons</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Shareable Nullify </span><a href="prsn.htm">Person</a>.<a href="prsn.htm#F_DialysisEncounter">DialysisEncounter</a></p>
        </div>
        <h3>
Stays of encounter</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Shareable Cascade </span><a href="stay.htm">Stay</a>.<a href="stay.htm#F_Encounter">Encounter</a></p>
        </div>
        <h3>
Reports of encounter</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Shareable Cascade </span><a href="rprt.htm">Report</a>.<a href="rprt.htm#F_Encounter">Encounter</a></p>
        </div>
        <h3>
Orders</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Shareable Restrict </span><a href="ord.htm">Order</a>.<a href="ord.htm#F_Encounter">Encounter</a></p>
        </div>
        <h3>
Visits</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Shareable Cascade </span><a href="vst.htm">w_Visit</a>.<a href="vst.htm#F_Encounter">Encounter</a></p>
        </div>
        <h3>
Report groups of encounter</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Shareable Cascade </span><a href="rprg.htm">ReportGroup</a>.<a href="rprg.htm#F_Encounter">Encounter</a></p>
        </div>
        <h3>
Contracts of encounter</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Shareable Cascade </span><a href="cntr.htm">Contract</a>.<a href="cntr.htm#F_Encounter">Encounter</a></p>
        </div>
        <h3>
Diagnoses</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><span class="Properties">Shareable Cascade </span><a href="diag.htm">Diagnosis</a>.<a href="diag.htm#F_Encounter">Encounter</a></p>
        </div><a name="Queries"></a>
        <h2>
Queries</h2><a name="Q_DoubleEncounters"></a>
        <h3>
Double encounters</h3>
        <div class="MemberHelp">
            <p>
Query searching encounter records with the same institution and external id</p>
            <p class="Synopsis"><b>DoubleEncounters</b> (<span class="Type">Logical</span>&#160;<span class="Parameter">ForCommonPerson</span>, <span class="Type">Logical</span>&#160;<span class="Parameter">ForCommonInstitution</span>, <span class="Type">String</span>&#160;<span class="Parameter">MinimalCreationDate</span>, <span class="Type"><a href="sfn.htm">gp_SiteFunction</a></span>&#160;<span class="Parameter">RankingFunction</span>)</p>
            <dl>
                <dt><span class="Type">Logical</span>&#160;<span class="Parameter">ForCommonPerson</span></dt>
                <dd>
If set, double encounters will only be selected when assigned to the same patient.</dd>
                <dt><span class="Type">Logical</span>&#160;<span class="Parameter">ForCommonInstitution</span></dt>
                <dd>
If set, double encounters will only be selected when linked to the same institution.</dd>
                <dt><span class="Type">String</span>&#160;<span class="Parameter">MinimalCreationDate</span></dt>
                <dd>
Only encounters created during this period will be checked for existence of doubles.</dd>
                <dt><span class="Type"><a href="sfn.htm">gp_SiteFunction</a></span>&#160;<span class="Parameter">RankingFunction</span></dt>
                <dd>
The encounter with the highest ranking will be considered as the preferred one. Duplicate encounters will be displayed in descending ranking order and the encounter with the highest ranking will be passed as the 'good' one to the merge function.</dd>
            </dl>
        </div><a name="Q_Standard"></a>
        <h3>
Standard query for encounters</h3>
        <div class="MemberHelp">
            <p class="Synopsis"><b>Standard</b> (<span class="Type"><a href="prsn.htm">Person</a></span>&#160;<span class="Parameter">Person</span>, <span class="Type"><a href="spmn.htm">Specimen</a></span>&#160;<span class="Parameter">Institution</span>, <span class="Type">DateTime</span>&#160;<span class="Parameter">ReferenceTime</span>)</p>
            <dl>
                <dt><span class="Type"><a href="prsn.htm">Person</a></span>&#160;<span class="Parameter">Person</span></dt>
                <dt><span class="Type"><a href="spmn.htm">Specimen</a></span>&#160;<span class="Parameter">Institution</span></dt>
                <dt><span class="Type">DateTime</span>&#160;<span class="Parameter">ReferenceTime</span></dt>
            </dl>
        </div><a name="Indexes"></a>
        <h2>
Indexes</h2>
        <ul>
            <li value="1"><span class="Properties">Unique </span><b>+ Id </b>
            </li>
            <li value="2"><span class="Properties">Externalization </span><b>+ Institution + ExternalId </b>
            </li>
            <li value="3"><b>+ ExternalId </b>
            </li>
            <li value="4"><b>+ Person + Institution + StartTime </b>
            </li>
            <li value="5"><b>+ Person + StartTime </b>
            </li>
            <li value="6"><b>+ Physician </b>
            </li>
            <li value="7"><b>+ Type </b>
            </li>
        </ul><a name="Validations"></a>
        <h2>
Validations</h2>
        <ul>
        </ul>
        <hr width="100%" size="0" align="center" />
        <p align="Right">
Copyright Â© 2019 MIPS N.V.<br />
All rights reserved.</p>
    </body>
</html>