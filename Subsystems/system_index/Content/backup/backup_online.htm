<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="system_index.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Backup">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <meta http_equiv="Content-Language" content="en-us" /><title>Online backups</title>
        <link href="../Resources/StyleSheets/shared.css" rel="stylesheet" type="text/css" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/require.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/require.config.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" defer="defer" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" defer="defer" type="text/javascript">
        </script>
    </head>
    <body>
        <h1><a name="aanchor32"></a>
            <MadCap:concept term="System management" />Online backups</h1>
        <h2>GLIMS on a Progress database</h2>
        <p>Making an online backup consists of two steps:</p>
        <ol>
            <li value="1">An image of the database is being made to disk using the Progress 
	 online backup tool. MIPS provides the necessary scripts to perform 
	 this step.</li>
            <li value="2">The files generated by the online backup should be stored on tape 
	 using external backup tools. The customer's IT department should take 
	 care of this.</li>
        </ol>
        <h3>Installing the online backup script for Windows</h3>
        <p>In this example, scripts are put in d:\bin, but they can be put in any 
 location on the GLIMS server.</p>
        <p>Create a batch file d:\bin\backup.bat, with the following contents:</p><pre>
@echo off
rem ~~~~~~~~~ CUSTOMIZE THIS ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
set GLIMSDBF=e:\glimsdbf
set GLIMSBCK=f:\glimsbck
set DLC=d:\dlc101c
rem ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
del %GLIMSBCK%\backup-7.log
ren %GLIMSBCK%\backup-6.log %GLIMSBCK%\backup-7.log
ren %GLIMSBCK%\backup-5.log %GLIMSBCK%\backup-6.log
ren %GLIMSBCK%\backup-4.log %GLIMSBCK%\backup-5.log
ren %GLIMSBCK%\backup-3.log %GLIMSBCK%\backup-4.log
ren %GLIMSBCK%\backup-2.log %GLIMSBCK%\backup-3.log
ren %GLIMSBCK%\backup-1.log %GLIMSBCK%\backup-2.log
ren %GLIMSBCK%\backup.log %GLIMSBCK%\backup-1.log
echo ======================================================= &gt;&gt;%GLIMSBCK%\backup.log
echo GLIMS BACKUP STARTED &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&gt;&gt;%GLIMSBCK%\backup.log
date /t &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&gt;&gt;%GLIMSBCK%\backup.log
time /t &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&gt;&gt;%GLIMSBCK%\backup.log
echo ======================================================= &gt;&gt;%GLIMSBCK%\backup.log
call %DLC%\bin\prostrct list %GLIMSDBF%\glims &gt;&gt;%GLIMSBCK%\backup.log
call %DLC%\bin\probkup online %GLIMSDBF%\glims %GLIMSBCK%\glims.bck -Bp 64 -verbose &gt;&gt;%GLIMSBCK%\backup.log
copy %GLIMSDBF%\glims.st %GLIMSBCK%
call %DLC%\bin\prostrct list %GLIMSDBF%\genrw &gt;&gt;%GLIMSBCK%\backup.log
call %DLC%\bin\probkup online %GLIMSDBF%\genrw %GLIMSBCK%\genrw.bck -Bp 64 -verbose &gt;&gt;%GLIMSBCK%\backup.log
copy %GLIMSDBF%\genrw.st %GLIMSBCK%
echo ======================================================= &gt;&gt;%GLIMSBCK%\backup.log
echo GLIMS BACKUP ENDED &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&gt;&gt;%GLIMSBCK%\backup.log
date /t &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&gt;&gt;%GLIMSBCK%\backup.log
time /t &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&gt;&gt;%GLIMSBCK%\backup.log
echo ======================================================= &gt;&gt;%GLIMSBCK%\backup.log</pre>
        <p>
            <br /><span class="style1">Important remarks:</span>
        </p>
        <ul>
            <li value="1">The backup log files can be found in the backup folder. They should 
	 be verified regularly.</li>
            <li value="2">In order to avoid possible sequence number problems, you should 
	 always first backup GLIMS, then GENRW.</li>
            <li value="3">Always put the backup on a dedicated disk. Never put the backup 
	 on the same disk as the database.</li>
            <li value="4">Putting the backup on a shared network drive is not supported by 
	 Progress, since network problems during the backup can bring the database 
	 into troubles.</li>
        </ul>
        <h3>Scheduling the backup script</h3>
        <p>Windows 2008</p>
        <ul>
            <li value="1">Open <em>Start -&gt; Control Panel -&gt; Administrative Tools -&gt; 
	 Task Scheduler</em></li>
            <li value="2">Highlight <em>Task Scheduler Library</em> and click <em>Create 
	 Basic Task ...</em><br /><br /><img src="taskscheduler1.png" alt="" width="801" height="384" border="0" /><br /></li>
            <li value="3">Follow the wizard<br /><br /><img src="taskscheduler2.png" alt="" border="0" /><br /><br /><img src="taskscheduler3.png" alt="" border="0" /><br /><br /><img src="taskscheduler4.png" alt="" border="0" /><br /><br /><img src="taskscheduler5.png" alt="" border="0" /><br /><br /><img src="taskscheduler6.png" alt="" border="0" /><br /><br /><img src="taskscheduler7.png" alt="" border="0" /><br /></li>
        </ul>
        <h3>Configuring backups on UNIX</h3>
        <p>The MIPS Application Manager (mam scripts) contains the necessary backup 
 procedures.</p>
        <ul>
            <li value="1">Define a variable TAPEDEVICE in $GLIMS/.glimsrc. The name is misleading 
	 - this variable should point to the location where the online backup 
	 should be put (e.g. TAPEDEVICE=/glimsbck)</li>
            <li value="2">The backup can be executed with <span class="style3">mam glims 
	 backup</span>. The Application Manager will automatically detect if 
	 the backup should be made online or not.</li>
            <li value="3">The log files can be found in $GLIMS/tmp/mam.log</li>
            <li value="4">The backup can be scheduled daily as a cron job</li>
        </ul>
        <h3>Backup to tape</h3>
        <p>A final backup to tape should be done after the Progress online backup 
 has ended. Care should be taken not to have an overlap between the Progress 
 backup and the tape backup performed by the external backup tools.</p>
        <p>Only the backup files generated by the online backup script (in the 
 example above they are put in f:\glimsbck) should be picked up by the 
 external backup tools. The database files themselves (in the example above 
 these are in e:\glimsdbf) should not be touched by the external backup 
 tools in order to avoid locking problems.</p>
        <p>It is recommended to have at least the GLIMS installation directory 
 (e.g. d:\glims8) included in the tape backup.</p>
        <h3>Common performance problems</h3>
        <ul>
            <li value="1">On Windows 2008, you might notice that a scheduled backup runs 
	 much slower than a backup being ran interactively. This is because 
	 scheduled tasks get a lower processing priority by default.<br /><br />	Solution:<br />	Export the task you have created in the Task Scheduler.<br /><br /><img src="taskscheduler8.png" alt="" border="0" /><br /><br />	Save the XML in any location<br />	Delete the original task<br />	Open the exported task with Notepad or any other text editor.<br />	Search for the text <span class="style3">&lt;Priority&gt;7&lt;/Priority&gt;</span> 
	 and change it to <span class="style3">&lt;Priority&gt;3&lt;/Priority&gt;</span> 
	 and save the file.<br />	Import the task again in the Task Scheduler. <em>Import Task..</em>. 
	 can be found in the menu on the right.<br /><br /></li>
            <li value="2">On Windows 2008 64 bit, the online backup seems to leak memory. 
	 With every online backup, more and more memory seems to be in use. 
	 This is because of a bad interaction with the file system cache in 
	 windows 2008 x64.<br /><br />	Solution:<br />	Download, install and configure Microsoft Windows Dynamic Cache Service:<br /><br />	1) Download and install the Dynamic Cache using <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=e24ade0a-5efe-43c8-b9c3-5d0ecb2f39af&amp;displaylang=en">this 
	 link</a><br />	2) After it has been installed a minor correction is needed in: <span class="style3">HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\DynCache\ImagePath</span><br />	Change <span class="style3">C:\Windows\System32\DynCache.exe</span> 
	 to <span class="style3">C:\Windows\SysWow64\DynCache.exe</span> otherwise 
	 the DynCache service won't start<br />	3) Modify (lower the cache max value) in: <span class="style3">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DynCache\Parameters\MaxSystemCacheMBytes</span> 
	 to 128 (hex) or a non-default value of your choice (check the documentation)<br />	4) Reboot the machine<br /><br /></li>
        </ul>
        <h2>GLIMS on an Oracle database</h2>
        <p>The customer's IT department should take care of the backup of the Oracle 
 database.</p>
        <p>This can be done using the Oracle Recovery Manager (RMAN), or by using 
 special plugins for external backup solutions that allow online backups 
 of Oracle databases.</p>
        <p>The GLIMS Server installer contains an optional example of an Oracle 
 online backup script based on tablespace backups at the operating system 
 level. Although this method is still widely used, making RMAN backups 
 is recommended. The provided script serves only as an example and is further 
 unsupported.</p>
    </body>
</html>